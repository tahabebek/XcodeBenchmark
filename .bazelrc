build \
  --apple_platform_type=ios \
  --xcode_version=13.2.1 \
  --ios_minimum_os=14.5 \
  --ios_simulator_device="iPhone 13" \
  --ios_simulator_version=15.5 \
  --features=swift.use_global_module_cache \
  --features=swift.no_generated_header \
  --repository_cache=~/.cache/bzl-repository/flagship \
  --disk_cache=~/.cache/bazel-target \
  --remote_download_minimal \
  --incompatible_strict_action_env --action_env=PATH=/usr/bin:/bin \
  --experimental_guard_against_concurrent_changes \
  --jobs=200 \
  --experimental_multi_threaded_digest \
  --cache_computed_file_digest \
  --verbose_failures \

build:debug \
  --compilation_mode=dbg \
  --define=apple.compress_ipa=no \
  --define=apple.package_swift_support=no \
  --define=apple.add_debugger_entitlement=yes \
  --define=apple.propagate_embedded_extra_outputs=yes \
  --ios_signing_cert_name="iPhone Developer" \

build:release \
  --compilation_mode=opt \
  --define=apple.compress_ipa=yes \
  --define=apple.package_swift_support=yes \
  --define=apple.add_debugger_entitlement=no \
  --experimental_multi_threaded_digest \
  --experimental_strict_action_env \
  --features=swift.no_generated_header \
  --features=swift.use_global_module_cache \
  --host_swiftcopt=-warnings-as-errors \
  --host_swiftcopt=-whole-module-optimization \
  --ios_signing_cert_name="iPhone Developer" \
  --ios_multi_cpus=arm64 \